<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="API Reference" href="api.html" /><link rel="prev" title="CALAMR: Component ALignment for Abstract Meaning Representation" href="top.html" />

    <!-- Generated with Sphinx 7.4.7 and Furo 2024.08.06 -->
        <title>CALAMR: Component ALignment for Abstract Meaning Representation - CALAMR: Component ALignment for Abstract Meaning Representation 0.2.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="top.html"><div class="brand">CALAMR: Component ALignment for Abstract Meaning Representation 0.2.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="top.html">
  
  
  <span class="sidebar-brand-text">CALAMR: Component ALignment for Abstract Meaning Representation 0.2.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Overview</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="api.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="api/zensols.calamr.html">zensols.calamr package</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of zensols.calamr package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="api/zensols.calamr.render.html">zensols.calamr.render namespace</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/zensols.calamr.summary.html">zensols.calamr.summary namespace</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/zensols.calamr.render.html">zensols.calamr.render namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/zensols.calamr.summary.html">zensols.calamr.summary namespace</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Contributing</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/index.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="calamr-component-alignment-for-abstract-meaning-representation">
<h1>CALAMR: Component ALignment for Abstract Meaning Representation<a class="headerlink" href="#calamr-component-alignment-for-abstract-meaning-representation" title="Link to this heading">¶</a></h1>
<p><a class="reference external" href="https://pypi.python.org/pypi/zensols.calamr"><img alt="PyPI" src="https://img.shields.io/pypi/v/zensols.calamr.svg" /></a>
<a class="reference external" href="https://www.python.org/downloads/release/python-3110"><img alt="Python 3.11" src="https://img.shields.io/badge/python-3.11-blue.svg" /></a>
<a class="reference external" href="https://github.com/plandes/calamr/actions"><img alt="Build Status" src="https://github.com/plandes/calamr/workflows/CI/badge.svg" /></a></p>
<p>This repository contains code for the paper <a class="reference external" href="https://aclanthology.org/2024.lrec-main.236/">CALAMR: Component ALignment for
Abstract Meaning Representation</a> and aligns the components of a bipartite
source and summary AMR graph.  To reproduce the results of the paper, see the
<a class="reference external" href="https://github.com/uic-nlp-lab/calamr">paper repository</a>.</p>
<p>The results are useful as a semantic graph similarity score (like SMATCH) or to
find the summarized portion (as AMR nodes, edges and subgraphs) of a document
or the portion of the source that represents the summary.  If you use this
library or the <a class="reference external" href="https://github.com/plandes/propbankdb">PropBank API/curated database</a>, please <a class="reference external" href="#citation">cite</a> our
paper.</p>
<p>Features:</p>
<ul class="simple">
<li><p>Align source/summary AMR graphs.</p></li>
<li><p>Scores for extent to which AMRs are summarized or represented in their source
text.</p></li>
<li><p>Rendering of the alignments.</p></li>
<li><p>Support for four AMR <a class="reference external" href="#corpora">corpora</a>.</p></li>
</ul>
<!-- markdown-toc start - Don't edit this section. Run M-x markdown-toc-refresh-toc --><section id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="#documentation">Documentation</a></p></li>
<li><p><a class="reference external" href="#installing">Installing</a></p></li>
<li><p><a class="reference external" href="#corpora">Corpora</a></p></li>
<li><p><a class="reference external" href="#usage">Usage</a></p>
<ul>
<li><p><a class="reference external" href="#command-line">Command Line</a></p>
<ul>
<li><p><a class="reference external" href="#aligning-corpus-documents">Aligning Corpus Documents</a></p></li>
<li><p><a class="reference external" href="#ad-hoc-corpora">Ad hoc Corpora</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#amr-release-30-corpus-ldc2020t02">AMR Release 3.0 Corpus (LDC2020T02)</a></p></li>
<li><p><a class="reference external" href="#api">API</a></p>
<ul>
<li><p><a class="reference external" href="#aligning-ad-hoc-documents">Aligning Ad hoc Documents</a></p></li>
<li><p><a class="reference external" href="#aligning-corpora-documents">Aligning Corpora Documents</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#docker">Docker</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#example-graphs">Example Graphs</a></p>
<ul>
<li><p><a class="reference external" href="#graphviz">GraphViz</a></p>
<ul>
<li><p><a class="reference external" href="#the-nascent-graph-with-flow-data">The Nascent Graph (with flow data)</a></p></li>
<li><p><a class="reference external" href="#the-source-graph">The Source Graph</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#plotly">Plotly</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#attribution">Attribution</a></p></li>
<li><p><a class="reference external" href="#citation">Citation</a></p></li>
<li><p><a class="reference external" href="#changelog">Changelog</a></p></li>
<li><p><a class="reference external" href="#license">License</a></p></li>
</ul>
<!-- markdown-toc end --></section>
<section id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Link to this heading">¶</a></h2>
<p>The recommended reading order for this project:</p>
<ol class="simple">
<li><p>The <a class="reference external" href="https://plandes.github.io/calamr/doc/CalamrSlides.pdf">conference slides</a></p></li>
<li><p>The abstract and introduction of the paper <a class="reference external" href="https://aclanthology.org/2024.lrec-main.236/">CALAMR: Component ALignment for
Abstract Meaning Representation</a></p></li>
<li><p><a class="reference external" href="https://plandes.github.io/calamr/doc/CalamrImplementGuide.pdf">Overview and implementation guide</a></p></li>
<li><p><a class="reference external" href="https://plandes.github.io/calamr/index.html">Full documentation</a></p></li>
<li><p><a class="reference external" href="https://plandes.github.io/calamr/api.html">API reference</a></p></li>
</ol>
</section>
<section id="installing">
<h2>Installing<a class="headerlink" href="#installing" title="Link to this heading">¶</a></h2>
<p>The library can be installed with pip from the <a class="reference external" href="https://pypi.org/project/zensols.calamr/">pypi</a> repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip3<span class="w"> </span>install<span class="w"> </span>zensols.calamr
</pre></div>
</div>
<p>See <a class="reference external" href="https://github.com/plandes/amr#installing-the-gsii-model">Installing the Gsii Model</a>.</p>
</section>
<section id="corpora">
<h2>Corpora<a class="headerlink" href="#corpora" title="Link to this heading">¶</a></h2>
<p>This repository contains code to support the following corpora with
source/summary AMR for alignment:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://catalog.ldc.upenn.edu/LDC2020T02">LDC2020T02</a> (AMR Release 3.0) Proxy Corpus</p></li>
<li><p><a class="reference external" href="https://amr.isi.edu">ISI</a> Little Prince</p></li>
<li><p><a class="reference external" href="https://amr.isi.edu">ISI</a> Bio AMR</p></li>
<li><p>A <a class="reference external" href="corpus/micro/source.json">micro corpus</a> (toy corpus) used in the paper examples and <a class="reference external" href="#usage">usage</a>.</p></li>
</ul>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p>The command-line tool and API does not depend on the repository.  However, it
has a template configuration file that both the CLI and the API use.  The
examples also use data in the repository.  Do the following to get started:</p>
<ol>
<li><p>Clone this repository and change the working directory to it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/plandes/calamr<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>calamr
</pre></div>
</div>
</li>
<li><p>Copy the resource file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cp<span class="w"> </span>src/config/dot-calamrrc<span class="w"> </span>~/.calamrrc
</pre></div>
</div>
</li>
</ol>
<section id="command-line">
<h3>Command Line<a class="headerlink" href="#command-line" title="Link to this heading">¶</a></h3>
<p>The steps below show how to use the command-line tool.  First set up the
application environment:</p>
<ol>
<li><p>Edit the <code class="docutils literal notranslate"><span class="pre">~/.calamrrc</span></code> file to choose the corpus and visualization.  Keep
the <code class="docutils literal notranslate"><span class="pre">calamr_corpus</span></code> set to <code class="docutils literal notranslate"><span class="pre">adhoc</span></code> for these examples.  (Note that you can
also set the the <code class="docutils literal notranslate"><span class="pre">CALAMRRC</span></code> environment variable to a file in a different
location if you prefer.)</p></li>
<li><p>Create the micro corpus:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>calamr<span class="w"> </span>mkadhoc<span class="w"> </span>--corpusfile<span class="w"> </span>corpus/micro/source.json
</pre></div>
</div>
</li>
<li><p>Print the document keys of the corpus:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>calamr<span class="w"> </span>keys
</pre></div>
</div>
</li>
</ol>
<section id="aligning-corpus-documents">
<h4>Aligning Corpus Documents<a class="headerlink" href="#aligning-corpus-documents" title="Link to this heading">¶</a></h4>
<p>AMR corpora that distinguish between source and summary documents are needed so
the API knows what data to align.  The following examples utilize preexisting
corpora (including the last section’s micro corpus):</p>
<ol>
<li><p>Generate the Liu et al. graph for the micro corpus in directory <code class="docutils literal notranslate"><span class="pre">example</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>calamr<span class="w"> </span>aligncorp<span class="w"> </span>liu-example<span class="w"> </span>-f<span class="w"> </span>txt<span class="w"> </span>-o<span class="w"> </span>example
</pre></div>
</div>
</li>
<li><p>Force the <em>Little Prince</em> AMR corpus download and confirm success with the
single document key <code class="docutils literal notranslate"><span class="pre">1943</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>calamr<span class="w"> </span>keys<span class="w"> </span>--override<span class="o">=</span>calamr_corpus.name<span class="o">=</span>little-prince
</pre></div>
</div>
</li>
<li><p>Use the default AMR parser to extract sentence text from the <em>Little Prince</em>
AMR corpus using the <a class="reference external" href="https://github.com/SapienzaNLP/spring">SPRING</a> (Bevilacqua et al. 2021) parser:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>calamr<span class="w"> </span>penman<span class="w"> </span>-o<span class="w"> </span>lp.txt<span class="w"> </span>--limit<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="se">\</span>
<span class="w">	</span>--override<span class="w"> </span>amr_default.parse_model<span class="o">=</span>spring<span class="w"> </span><span class="se">\</span>
<span class="w">	</span>~/.cache/calamr/corpus/amr-rel/amr-bank-struct-v3.0.txt
</pre></div>
</div>
</li>
<li><p>Score the parsed sentences using CALAMR, SMATCH and WLK:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>calamr<span class="w"> </span>score<span class="w"> </span>--parsed<span class="w"> </span>lp.txt<span class="w"> </span><span class="se">\</span>
<span class="w">	</span>--methods<span class="w"> </span>calamr,smatch,wlk<span class="w"> </span><span class="se">\</span>
<span class="w">	</span>~/.cache/calamr/corpus/amr-rel/amr-bank-struct-v3.0.txt
</pre></div>
</div>
</li>
</ol>
</section>
<section id="ad-hoc-corpora">
<h4>Ad hoc Corpora<a class="headerlink" href="#ad-hoc-corpora" title="Link to this heading">¶</a></h4>
<p>The <a class="reference external" href="corpus/micro/source.json">micro corpus</a> can be edited and rebuilt to add your own data to be
aligned.  However, there’s an easier way to align ad hoc documents.</p>
<ol>
<li><p>Align a summarized document not included in any corpus.  First create the
annotated documents as files <code class="docutils literal notranslate"><span class="pre">short-story.json</span></code>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w"> 	   </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;intro&quot;</span><span class="p">,</span>
<span class="w"> 	   </span><span class="nt">&quot;body&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The Dow Jones Industrial Average and other major indexes pared losses.&quot;</span><span class="p">,</span>
<span class="w"> 	   </span><span class="nt">&quot;summary&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Dow Jones and other major indexes reduced losses.&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w"> 	   </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dow-stats&quot;</span><span class="p">,</span>
<span class="w"> 	   </span><span class="nt">&quot;body&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The Dow ended 0.5% lower on Friday while the S&amp;P 500 fell 0.7%. Among the S&amp;P sectors, energy and utilities gained while technology and communication services lagged.&quot;</span><span class="p">,</span>
<span class="w"> 	   </span><span class="nt">&quot;summary&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Dow sank 0.5%, S&amp;P 500 lost 0.7% and energy, utilities up, tech, comms came down.&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Now align the documents using the <code class="docutils literal notranslate"><span class="pre">XFM</span> <span class="pre">Bart</span> <span class="pre">Base</span></code> AMR parser, rendering
with the maximum number of steps (<code class="docutils literal notranslate"><span class="pre">-r</span> <span class="pre">10</span></code>), and save results to <code class="docutils literal notranslate"><span class="pre">example</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>calamr<span class="w"> </span>align<span class="w"> </span>short-story.json<span class="w"> </span>--override<span class="w"> </span>amr_default.parse_model<span class="o">=</span>xfm_bart_base<span class="w"> </span>-r<span class="w"> </span><span class="m">10</span><span class="w"> </span>-o<span class="w"> </span>example<span class="w"> </span>-f<span class="w"> </span>txt
</pre></div>
</div>
</li>
</ol>
<p>The <code class="docutils literal notranslate"><span class="pre">-r</span></code> option controls how many intermediate graphs generated to show the
iteration of the algorithm over all the steps (see the paper for details).</p>
</section>
</section>
<section id="amr-release-3-0-corpus-ldc2020t02">
<h3>AMR Release 3.0 Corpus (LDC2020T02)<a class="headerlink" href="#amr-release-3-0-corpus-ldc2020t02" title="Link to this heading">¶</a></h3>
<p>If you are using the AMR 3.0 corpus, there is a preprocessing step that needs
executing before it can be used.</p>
<p>The Proxy Report corpus from the AMR 3.0 does not have both the <code class="docutils literal notranslate"><span class="pre">alignments</span></code>
(text-to-graph alignments) and <code class="docutils literal notranslate"><span class="pre">snt-type</span></code> (indicates if a sentence is part of
the source or the summary) metadata.  By default, this API expects both.  To
merge them into one dataset do the following:</p>
<ol>
<li><p><a class="reference external" href="https://catalog.ldc.upenn.edu/LDC2020T02">Obtain or purchase</a> the corpus.</p></li>
<li><p>Move the file where the software can find it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>~/.cache/calamr/download
cp<span class="w"> </span>/path/to/amr_annotation_3.0_LDC2020T02.tgz<span class="w"> </span>~/.cache/calamr/download
</pre></div>
</div>
</li>
<li><p>Merge the alignments and sentence descriptors:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./src/bin/merge-proxy-anons.py
</pre></div>
</div>
</li>
<li><p>Confirm the merge was successful by printing the document keys and align a report:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>calamr<span class="w"> </span>keys<span class="w"> </span>--override<span class="o">=</span>calamr_corpus.name<span class="o">=</span>proxy-report
calamr<span class="w"> </span>aligncorp<span class="w"> </span>20041010_0024<span class="w"> </span>-f<span class="w"> </span>txt<span class="w"> </span>-o<span class="w"> </span>example<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--override<span class="w"> </span>calamr_corpus.name<span class="o">=</span>proxy-report
</pre></div>
</div>
</li>
</ol>
</section>
<section id="api">
<h3>API<a class="headerlink" href="#api" title="Link to this heading">¶</a></h3>
<p>This section explains how to use the library’s API directly in Python.</p>
<section id="aligning-ad-hoc-documents">
<h4>Aligning Ad hoc Documents<a class="headerlink" href="#aligning-ad-hoc-documents" title="Link to this heading">¶</a></h4>
<p>This is taken from the <a class="reference external" href="./test/test-adhoc.py">ad hoc API example</a></p>
<ol>
<li><p>Get the resource bundle:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">zensols.amr</span><span class="w"> </span><span class="kn">import</span> <span class="n">AmrSentence</span><span class="p">,</span> <span class="n">AmrDocument</span><span class="p">,</span> <span class="n">AmrFeatureDocument</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">zensols.calamr</span><span class="w"> </span><span class="kn">import</span> <span class="n">DocumentGraph</span><span class="p">,</span> <span class="n">FlowGraphResult</span><span class="p">,</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">ApplicationFactory</span>

<span class="c1"># get the resource bundle</span>
<span class="n">res</span><span class="p">:</span> <span class="n">Resource</span> <span class="o">=</span> <span class="n">ApplicationFactory</span><span class="o">.</span><span class="n">get_resource</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>Create test data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># create AMR sentences</span>
<span class="n">test_summary</span> <span class="o">=</span> <span class="n">AmrSentence</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="s2"># ::snt Joe&#39;s dog was chasing a cat in the garden.</span>
<span class="s2"># ::snt-type summary</span>
<span class="s2"># ::id liu-example.0</span>
<span class="s2">(c / chase-01</span>
<span class="s2">   :ARG0 (d / dog</span>
<span class="s2"> 		   :poss (p / person</span>
<span class="s2"> 					:name (n / name</span>
<span class="s2"> 							 :op1 &quot;Joe&quot;)))</span>
<span class="s2">   :ARG1 (c2 / cat)</span>
<span class="s2">   :location (g / garden))&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">test_body</span> <span class="o">=</span> <span class="n">AmrSentence</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="s2"># ::snt I saw Joe&#39;s dog, which was running in the garden.</span>
<span class="s2"># ::snt-type body</span>
<span class="s2"># ::id liu-example.1</span>
<span class="s2">(s / see-01</span>
<span class="s2">   :ARG0 (ii / i)</span>
<span class="s2">   :ARG1 (d / dog</span>
<span class="s2"> 		   :poss (p / person</span>
<span class="s2"> 					:name (n / name</span>
<span class="s2"> 							 :op1 &quot;Joe&quot;))</span>
<span class="s2"> 		   :ARG0-of (r / run-02</span>
<span class="s2"> 					   :location (g / garden))))&quot;&quot;&quot;</span><span class="p">)</span>

 <span class="c1"># create the AMR document </span>
<span class="n">adoc</span> <span class="o">=</span> <span class="n">AmrDocument</span><span class="p">((</span><span class="n">test_summary</span><span class="p">,</span> <span class="n">test_body</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p>Create the annotated document and align it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># convert the AMR document to an AMR annotated document with NLP features</span>
<span class="n">fdoc</span><span class="p">:</span> <span class="n">AmrFeatureDocument</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">to_annotated_doc</span><span class="p">(</span><span class="n">adoc</span><span class="p">)</span>
<span class="c1"># create the bipartite source/summary graph</span>
<span class="n">graph</span><span class="p">:</span> <span class="n">DocumentGraph</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">create_graph</span><span class="p">(</span><span class="n">fdoc</span><span class="p">)</span>
<span class="c1"># align the graph</span>
<span class="n">flow</span><span class="p">:</span> <span class="n">FlowGraphResult</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">align</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Get and visualize the results:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># write the summarization metrics</span>
<span class="n">flow</span><span class="o">.</span><span class="n">write</span><span class="p">()</span>
<span class="c1"># render the results as a graph in a web browser</span>
<span class="n">flow</span><span class="o">.</span><span class="n">render</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="aligning-corpora-documents">
<h4>Aligning Corpora Documents<a class="headerlink" href="#aligning-corpora-documents" title="Link to this heading">¶</a></h4>
<p>To use an existing corpus (ad hoc “micro” corpus, The Little Prince, Biomedical
Corpus, or Proxy report 3.0), use the following API to speed things up:</p>
<ol>
<li><p>Get the resource bundle:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">zensols.amr</span><span class="w"> </span><span class="kn">import</span> <span class="n">AmrFeatureDocument</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">zensols.calamr</span><span class="w"> </span><span class="kn">import</span> <span class="n">DocumentGraph</span><span class="p">,</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">ApplicationFactory</span>

<span class="c1"># get the resource bundle</span>
<span class="n">res</span><span class="p">:</span> <span class="n">Resource</span> <span class="o">=</span> <span class="n">ApplicationFactory</span><span class="o">.</span><span class="n">get_resource</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>Get the Liu et al. AMR feature document example and print it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">doc</span><span class="p">:</span> <span class="n">AmrFeatureDocument</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">get_corpus_document</span><span class="p">(</span><span class="s1">&#39;liu-example&#39;</span><span class="p">)</span>
<span class="n">doc</span><span class="o">.</span><span class="n">write</span><span class="p">()</span>
</pre></div>
</div>
<p>output:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">[</span><span class="nv">T</span><span class="p p-Indicator">]:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Joe&#39;s dog was chasing a cat in the garden. I saw Joe&#39;s dog, which was running in the garden. The dog was chasing a cat.</span>
<span class="nt">sentences</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">[</span><span class="nv">N</span><span class="p p-Indicator">]:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Joe&#39;s dog was chasing a cat in the garden.</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">(c0 / chase-01~e.4</span>
<span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">:location (g0 / garden~e.9)</span>
<span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">:ARG0 (d0 / dog~e.2</span>
<span class="w">                    </span><span class="l l-Scalar l-Scalar-Plain">:poss (p0 / person</span>
<span class="w">                          </span><span class="l l-Scalar l-Scalar-Plain">:name (n0 / name</span>
<span class="w">                                </span><span class="l l-Scalar l-Scalar-Plain">:op1 &quot;Joe&quot;~e.0)))</span>
<span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">:ARG1 (c1 / cat~e.6))</span>
<span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="nt">amr</span><span class="p">:</span>
<span class="w">    </span><span class="nt">summary</span><span class="p">:</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">Joe&#39;s dog was chasing a cat in the garden.</span>
<span class="w">    </span><span class="nt">sections</span><span class="p">:</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">no section sentences</span>
<span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">I saw Joe&#39;s dog, which was running in the garden.</span>
<span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">The dog was chasing a cat.</span>
</pre></div>
</div>
</li>
<li><p>Align (if not already and cached) and get the flow results of the example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">flow</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">align_corpus_document</span><span class="p">(</span><span class="s1">&#39;liu-example&#39;</span><span class="p">)</span>
<span class="n">flow</span><span class="o">.</span><span class="n">write</span><span class="p">()</span>
</pre></div>
</div>
<p>output:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">summary</span><span class="p">:</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">Joe&#39;s dog was chasing a cat in the garden.</span>
<span class="nt">sections</span><span class="p">:</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">no section sentences</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">I saw Joe&#39;s dog, which was running in the garden.</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">The dog was chasing a cat.</span>
<span class="nt">statistics</span><span class="p">:</span>
<span class="w">    </span><span class="nt">agg</span><span class="p">:</span>
<span class="w">        </span><span class="nt">aligned_portion_hmean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.8695652173913044</span>
<span class="w">        </span><span class="nt">mean_flow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.7131309357900468</span>
<span class="w">        </span><span class="nt">tot_alignable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">21</span>
<span class="w">        </span><span class="nt">tot_aligned</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">18</span>
<span class="w">        </span><span class="nt">aligned_portion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.8571428571428571</span>
<span class="w">        </span><span class="nt">reentrancies</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
</pre></div>
</div>
</li>
<li><p>Parse the first document from the <a class="reference external" href="#ad-hoc-corpora">ad hoc JSON file</a> align
it, and give its statistics:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">doc</span><span class="p">:</span> <span class="n">AmrFeatureDocument</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">parse_documents</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;short-story.json&#39;</span><span class="p">))))</span>
<span class="n">graph</span><span class="p">:</span> <span class="n">DocumentGraph</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">create_graph</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
<span class="n">flow</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">align</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="n">flow</span><span class="o">.</span><span class="n">write</span><span class="p">()</span>
</pre></div>
</div>
<p>output:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">summary</span><span class="p">:</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">Dow Jones and other major indexes reduced losses.</span>
<span class="nt">sections</span><span class="p">:</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">no section sentences</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">The Dow Jones Industrial Average and other major indexes pared losses.</span>
<span class="nt">statistics</span><span class="p">:</span>
<span class="w">    </span><span class="nt">agg</span><span class="p">:</span>
<span class="w">        </span><span class="nt">aligned_portion_hmean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">        </span><span class="nt">mean_flow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.9269955839429582</span>
<span class="w">        </span><span class="nt">tot_alignable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">24</span>
<span class="w">        </span><span class="nt">tot_aligned</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">24</span>
<span class="w">        </span><span class="nt">aligned_portion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">        </span><span class="nt">reentrancies</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w w-Error"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</li>
<li><p>Render the results of a flow:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">flow</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">align_corpus_document</span><span class="p">(</span><span class="s1">&#39;liu-example&#39;</span><span class="p">)</span>
<span class="n">flow</span><span class="o">.</span><span class="n">render</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>Render all graphs of the flow results of the flow to directory <code class="docutils literal notranslate"><span class="pre">example</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">flow</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
    <span class="n">contexts</span><span class="o">=</span><span class="n">flow</span><span class="o">.</span><span class="n">get_render_contexts</span><span class="p">(</span><span class="n">include_nascent</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">directory</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;example&#39;</span><span class="p">),</span>
    <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="docker">
<h3>Docker<a class="headerlink" href="#docker" title="Link to this heading">¶</a></h3>
<p>A stand-alone docker image is also available (see <a class="reference external" href="./docker">CALAMR Docker
image</a>).  This <a class="reference external" href="https://hub.docker.com/r/plandes/calamr">docker image</a> provides stand-alone container with all
models, configuration and the adhoc micro corpus installed.</p>
</section>
</section>
<section id="example-graphs">
<h2>Example Graphs<a class="headerlink" href="#example-graphs" title="Link to this heading">¶</a></h2>
<p>The Liu et al. example graphs were created from the last step of the
<a class="reference external" href="#api">API</a> examples, which is equivalent the first step of the <a class="reference external" href="#aligning-corpus-documents">command line
example</a>.</p>
<section id="graphviz">
<h3>GraphViz<a class="headerlink" href="#graphviz" title="Link to this heading">¶</a></h3>
<p>To create these graphs, set your <code class="docutils literal notranslate"><span class="pre">~/.calamrrc</span></code> configuration to:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[calamr_default]</span>
<span class="na">renderer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">graphviz</span>
</pre></div>
</div>
<section id="the-nascent-graph-with-flow-data">
<h4>The Nascent Graph (with flow data)<a class="headerlink" href="#the-nascent-graph-with-flow-data" title="Link to this heading">¶</a></h4>
<p align="center">
	<img src="./doc/graphs/liu-nascent-graphviz.svg"
		alt="source graph" width="80%"
		style="outline: 5px solid #D3D3D3;"/>
</p></section>
<section id="the-source-graph">
<h4>The Source Graph<a class="headerlink" href="#the-source-graph" title="Link to this heading">¶</a></h4>
<p align="center">
	<img src="./doc/graphs/liu-source-graphviz.svg"
		alt="source graph" width="90%"
		style="outline: 5px solid #D3D3D3;"/>
</p></section>
</section>
<section id="plotly">
<h3>Plotly<a class="headerlink" href="#plotly" title="Link to this heading">¶</a></h3>
<p>To create these graphs, set your <code class="docutils literal notranslate"><span class="pre">~/.calamrrc</span></code> configuration to:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[calamr_default]</span>
<span class="na">renderer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">plotly</span>
</pre></div>
</div>
<p>See the <a class="reference external" href="https://plandes.github.io/calamr/doc/graphs/liu-source-plotly.html">interactive version</a>.
<a class="reference external" href="https://plandes.github.io/calamr/doc/graphs/liu-source-plotly.html"><img src="./doc/graphs/liu-source-plotly-screenshot.png"></a></p>
</section>
</section>
<section id="attribution">
<h2>Attribution<a class="headerlink" href="#attribution" title="Link to this heading">¶</a></h2>
<p>This project, or reference model code, uses:</p>
<ul class="simple">
<li><p>Python 3.11</p></li>
<li><p><a class="reference external" href="https://github.com/bjascob/amrlib">amrlib</a> for AMR parsing.</p></li>
<li><p><a class="reference external" href="https://github.com/bjascob/amr_coref">amr_coref</a> for AMR co-reference</p></li>
<li><p><a class="reference external" href="https://github.com/plandes/amr">zensols.amr</a> for AMR features and summarization data structures.</p></li>
<li><p><a class="reference external" href="https://www.sbert.net">Sentence-BERT</a> embeddings</p></li>
<li><p><a class="reference external" href="https://github.com/plandes/propbankdb">zensols.propbankdb</a> and <a class="reference external" href="https://github.com/plandes/deepnlp">zensols.deepnlp</a> for PropBank embeddings</p></li>
<li><p><a class="reference external" href="https://github.com/plandes/nlparse">zensols.nlparse</a> for natural language features and <a class="reference external" href="https://plandes.github.io/nlparse/api/zensols.nlp.html#zensols-nlp-score">NLP scoring</a></p></li>
<li><p><a class="reference external" href="https://github.com/snowblink14/smatch">Smatch</a> (Cai and Knight. 2013) and <a class="reference external" href="https://github.com/flipz357/weisfeiler-leman-amr-metrics">WLK</a> (Opitz et. al. 2021) for scoring.</p></li>
</ul>
</section>
<section id="citation">
<h2>Citation<a class="headerlink" href="#citation" title="Link to this heading">¶</a></h2>
<p>If you use this project in your research please use the following BibTeX entry:</p>
<div class="highlight-bibtex notranslate"><div class="highlight"><pre><span></span><span class="nc">@inproceedings</span><span class="p">{</span><span class="nl">landes-di-eugenio-2024-calamr-component</span><span class="p">,</span>
<span class="w">    </span><span class="na">title</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;{CALAMR}: Component {AL}ignment for {A}bstract {M}eaning {R}epresentation&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="na">author</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Landes, Paul  and</span>
<span class="s">      Di Eugenio, Barbara&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="na">editor</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Calzolari, Nicoletta  and</span>
<span class="s">      Kan, Min-Yen  and</span>
<span class="s">      Hoste, Veronique  and</span>
<span class="s">      Lenci, Alessandro  and</span>
<span class="s">      Sakti, Sakriani  and</span>
<span class="s">      Xue, Nianwen&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="na">booktitle</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Proceedings of the 2024 Joint International Conference on Computational Linguistics, Language Resources and Evaluation (LREC-COLING 2024)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="na">month</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nv">may</span><span class="p">,</span>
<span class="w">    </span><span class="na">year</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;2024&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="na">address</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;Torino, Italy&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="na">publisher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;ELRA and ICCL&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="na">url</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;https://aclanthology.org/2024.lrec-main.236&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="na">pages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;2622--2637&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="changelog">
<h2>Changelog<a class="headerlink" href="#changelog" title="Link to this heading">¶</a></h2>
<p>An extensive changelog is available <a class="reference internal" href="CHANGELOG.html"><span class="doc">here</span></a>.</p>
</section>
<section id="license">
<h2>License<a class="headerlink" href="#license" title="Link to this heading">¶</a></h2>
<p><a class="reference internal" href="LICENSE.html"><span class="doc">MIT License</span></a></p>
<p>Copyright (c) 2023 - 2025 Paul Landes</p>
<!-- links --></section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="api.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">API Reference</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="top.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Home</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Paul Landes
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">CALAMR: Component ALignment for Abstract Meaning Representation</a><ul>
<li><a class="reference internal" href="#table-of-contents">Table of Contents</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
<li><a class="reference internal" href="#installing">Installing</a></li>
<li><a class="reference internal" href="#corpora">Corpora</a></li>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#command-line">Command Line</a><ul>
<li><a class="reference internal" href="#aligning-corpus-documents">Aligning Corpus Documents</a></li>
<li><a class="reference internal" href="#ad-hoc-corpora">Ad hoc Corpora</a></li>
</ul>
</li>
<li><a class="reference internal" href="#amr-release-3-0-corpus-ldc2020t02">AMR Release 3.0 Corpus (LDC2020T02)</a></li>
<li><a class="reference internal" href="#api">API</a><ul>
<li><a class="reference internal" href="#aligning-ad-hoc-documents">Aligning Ad hoc Documents</a></li>
<li><a class="reference internal" href="#aligning-corpora-documents">Aligning Corpora Documents</a></li>
</ul>
</li>
<li><a class="reference internal" href="#docker">Docker</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-graphs">Example Graphs</a><ul>
<li><a class="reference internal" href="#graphviz">GraphViz</a><ul>
<li><a class="reference internal" href="#the-nascent-graph-with-flow-data">The Nascent Graph (with flow data)</a></li>
<li><a class="reference internal" href="#the-source-graph">The Source Graph</a></li>
</ul>
</li>
<li><a class="reference internal" href="#plotly">Plotly</a></li>
</ul>
</li>
<li><a class="reference internal" href="#attribution">Attribution</a></li>
<li><a class="reference internal" href="#citation">Citation</a></li>
<li><a class="reference internal" href="#changelog">Changelog</a></li>
<li><a class="reference internal" href="#license">License</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=938c9ccc"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    </body>
</html>